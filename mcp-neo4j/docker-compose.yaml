
services:
  neo4j:
    image: neo4j:5.19.0
    container_name: mcp_neo4j_database
    hostname: neo4j_db_host
    restart: always
    volumes:
      - ~/neo4j/logs:/logs
      - ~/neo4j/data:/data
      - ~/neo4j/plugins:/plugins
    environment:
      - NEO4J_AUTH=neo4j/password123
    networks:
      - mcp_internal_network
    healthcheck:
      test: ["CMD", "neo4j", "status"]
      interval: 30s
      timeout: 10s
      retries: 3

  neo4j-memory:
    image: mcp/neo4j-memory:0.1.3
    container_name: mcp_neo4j_memory_server
    restart: unless-stopped
    depends_on:
      neo4j:
        condition: service_healthy
    environment:
      - NEO4J_URL=bolt://neo4j_db_host:7687
      - NEO4J_USERNAME=neo4j
      - NEO4J_PASSWORD=password123
    networks:
      - mcp_internal_network
      - proxy

networks:
  mcp_internal_network:
    driver: bridge
  proxy:
    external: true
